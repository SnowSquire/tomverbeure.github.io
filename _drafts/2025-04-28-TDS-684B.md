---
layout: post
title: Tektronix TDS 684B Oscilloscope Uses CCD Analog Memory
date:   2025-04-28 00:00:00 -1000
categories:
---

* TOC
{:toc}

# Introduction

![TDS 684B showing 4 1 GHz sine waves](/assets/tds684b/tds684b.jpg)

I have a [Tektronix TDS 684B oscilloscope](/2024/04/17/Tektronix-TDS-Button-Swap.html) that I bought 
cheaply at an auction. It has 4 channels, each with a 1GHz of BW and a pretty impressive sample rate 
of 5Gsps. Even by today's standards those a respectable numbers. It's also the main reason why I have 
it: compared to modern oscilloscopes, the other features aren't nearly as impressive. It can only 
record 15k samples per channel at a time, for example.

I've always wondered how Tektronix managed to reach such high specification back in the nineties, 
so in this blog post I take a quick look at the internals and try to figure out how it works.

# System Architecture

The osciloscope had 2 main parts: 

* the acquisition board contains all the parts from analog input down to the sample memory as well as some triggering. 

  [![Acquisition board](/assets/tds684b/acquisition_board.jpg)](/assets/tds684b/acquisition_board.jpg)
  *(Click to enlarge)*

* the CPU board does the rest.

  [![CPU board](/assets/tds684b/cpu_board.jpg)](/assets/tds684b/cpu_board.jpg)
  *(Click to enlarge)*

2 flat cables and an PCB connect the 2 boards with each other. 

![CPU board](/assets/tds684b/interconnections.jpg)

The interconnect PCB traces go to memory on the acquisition board. It's safe to assume that
this interface is used for high-speed data transfer while the flat cables are for lower speed
configuration and status traffic.

# The Acquisition Board

The TDS 684B has 4 identical channels that can easily be identified.

[![Annotated acquisition board](/assets/tds684b/acquisition_board_annotated.jpg)](/assets/tds684b/acquisition_board_annotated.jpg)
*(Click to enlarge)*

There are 6 major components in path from input to memory:

* Analog front-end

  This section is hidden under a shielding cover, but you expect to find a bunch of
  relays to switch between different configurations: AC/DC, 1Meg/50 Ohm termination, ...

  I didn't open it because it requires disassembling pretty much the whole scope.

* Signal Conditioner?

  This is the device with the heatsink. I didn't remove it because they are glued on and
  there's no metal latch to keep them in place. Reattaching them is a pain.

  Since the acquisition board has a bunch of custom ICs already, chances are that this
  one is custom as well, so knowing the exact part number wouldn't add a lot of extra info.

  But what we can see is one differential pair going from the analog front-end into
  this IC and a second one going from this IC to the next one. 

* National Semi ADG286D Mystery Chip

  Another custom chip with unknown functionality. 

* Motoral MC10319DW 8-bit 25 MHz A/D Converter

  Finally an off-the-shelf device! But why is it only rated for 25MHz?

* National Semi ADG303 - A Custom Memory Controller Chip

  It receives the 4 8-bit lanes from the 4 ADCs on one side and connects
  to 4 SRAMs on the other.

* 4 Alliance AS7C256-15JC SRAMs

  Each memory has a capacity of 32KB and a 15ns access time, which allows for
  a maximum clock of 66 MHz.

  The TDS 684B supports waveform traces of 15k points, so they either only use
  half of the available capacity or they use some kind of double-buffering scheme.

  There are 4 unpopulated memory footprints. In one of my TDS 420A blog posts,
  I extended the waveform memory 
  [by soldering in extra SRAM chips](/2020/07/11/Option-Hacking-the-Tektronix-TDS-420A.html#in-search-of-the-missing-memory).
  
  I'm not aware of a TDS 684B option for additional memory, so I'm not optimistic
  about the ability to expand its memory. There's also no such grayed-out option
  in the menu.


When googling for "ADG286D", I got my answer when I stumbled on this comment by ... on BlueSky:
he speculates that it's an analog memory, probably some kind of CCD FIFO. Analog values are captured
at a rate of up to  5GHz and then shifted out at a much lower speed and fed into the ADC.

Let's verify this hypothesis by measuring a few signals on the board with a different scope.

* Apply a 200MHz sine signal to channel 4 and sample at 5Gsps
* Measure the signal at the pins of the chip with the heatsink
* Measure it again at the analog input of the ADC

If the hypothesis is correct, we should see the original signal at the original speed in the first
measurement and a slowed down version at the input of the ADC

We can also look at the clock input of the ADC: it's set to 8MHz.

# Transfer to CPU Board


# TDS 784


Acquisition memory:

* Nat Semi ADG286D
    * Custom
    * CCD bubble memory?

* Motorola MC10319DW
    * 8-bit ADC
    * max 25MHz

* 15k sample acquisition

* [Alliance AS7C256-15JC](https://www.farnell.com/datasheets/101856.pdf)
    * 5V
    * 32K x 8
    * 15ns access time -> 83 MHz clock speed
* 4 memories

* Measuring ADC clock of 8 MHz when sampling at 5Gsps

# References

* [EEVblog - Comment about TDS 6xx CCD scopes](https://www.eevblog.com/forum/testgear/conversion-of-500mhz-tds744a-to-1ghz-tds784a/msg1032649/#msg1032649)
* [Groups.io - TDS684C comment about CCD scopes](https://groups.io/g/TekScopes/message/162247)
* [BlueSky - Comment about CCD scope](https://web-cdn.bsky.app/profile/retr0.id/post/3ljqf5bvkys2d)

